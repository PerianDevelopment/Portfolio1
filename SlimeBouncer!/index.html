<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PerianDev — Project Page</title>

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700;900&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg: #222222;
      --muted: #bdbdbd;
      --text: #eaeaea;
      --brand: #FF382E;
      --card-shadow: 0 6px 18px rgba(0,0,0,0.6);
      --radius: 12px;
      --transition: 240ms cubic-bezier(.2,.9,.2,1);
      --max-width: 1100px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      min-height:100%;
      background:var(--bg);
      color:var(--text);
      font-family: "Poppins", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.45;
    }

    .container{max-width:var(--max-width);margin:32px auto;padding:24px;}

    .divider{height:1px;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.04),transparent);margin:18px 0 22px 0;border-radius:4px;}

    .projects-header{display:flex;flex-direction:column;align-items:flex-start;gap:12px;margin:0 0 8px 0;}
    .section-header{font-size:24px;font-weight:900;display:flex;align-items:center;gap:12px;}
    .section-header .dot{width:10px;height:10px;background:var(--brand);border-radius:50%;box-shadow:0 6px 20px rgba(255,56,46,0.16);}

    .game-links{display:flex;gap:16px;flex-wrap:wrap;align-items:center;}
    .game-link{color:var(--text);font-weight:700;text-decoration:none;position:relative;padding:4px 2px;transition:color var(--transition), transform var(--transition);}
    .game-link::after{content:"";position:absolute;left:0;right:0;bottom:0;height:2px;background:var(--brand);transform:scaleX(0);transform-origin:left center;transition:transform var(--transition);}
    .game-link:hover{color:white;transform:translateY(-2px);}
    .game-link:hover::after{transform:scaleX(1);}

    .portfolio-title{font-size:32px;font-weight:900;margin-bottom:12px;color:var(--text);}
    .portfolio-title a{color:var(--text);text-decoration:none;}

    .game-info{display:flex;flex-direction:column;gap:16px;}
    .game-info h2{margin:0;font-size:28px;font-weight:800;}

    .game-details{display:flex;gap:24px;align-items:flex-start;}
    .game-cover{flex:0 0 50%;}
    .game-cover img{width:100%;height:auto;border-radius:12px;box-shadow:var(--card-shadow);}
    .game-meta{flex:1;display:flex;flex-direction:column;gap:12px;}

    .meta-item .label{display:block;color:var(--muted);font-weight:600;font-size:12px;}
    .meta-item .value{color:var(--text);font-weight:500;margin-top:4px;font-size:14px;}

    .project-section{margin:24px 0;}
    .project-section h3{margin:0 0 12px;font-size:20px;font-weight:700;color:var(--text);}
    .project-section p{margin:0 0 12px;color:var(--text);}
    .project-section ul{margin:0;padding-left:20px;}
    .project-section li{margin-bottom:6px;}

    a.reset{color:var(--brand);text-decoration:none;}
    a.reset:hover{text-decoration:underline;}

    .foot{margin-top:28px;color:var(--muted);font-size:13px;text-align:center;}
  </style>
</head>
<body>
  <div class="container" role="main">
    <div class="portfolio-title"><a href="https://periandevelopment.github.io/Portfolio1">Portfolio</a></div>

    <nav aria-label="Project quick links">
      <div class="game-links" id="project-links"></div>
    </nav>

    <div class="divider"></div>

    <section class="game-info" id="game-info"></section>

    <div class="divider"></div>

    <section class="project-section">
      <h3>Overview</h3>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla accumsan, metus ultrices eleifend gravida, nulla nunc varius lectus.</p>
      <img src="banner_2x1.png" alt="Project banner" style="width:100%;border-radius:12px;box-shadow:var(--card-shadow);margin-top:12px;">
    </section>

    <div class="divider"></div>

    <section class="project-section">
      <h3>Summary of Contributions</h3>
      <ul>
        <li>Implemented gameplay systems</li>
        <li>Designed UI/UX</li>
        <li>Created animations and effects</li>
        <li>Optimized performance</li>
      </ul>
      <img src="banner_2x1.png" alt="Contributions banner" style="width:100%;border-radius:12px;box-shadow:var(--card-shadow);margin-top:12px;">
    </section>

    <div class="foot" id="site-footer">Made with ♥ by PerianDev</div>
  </div>

  <script>
    async function fetchJson(url) {
      const res = await fetch(url);
      if (!res.ok) throw new Error(`Failed to fetch ${url}: ${res.status}`);
      return res.json();
    }

    async function applyBrandingFromRemote() {
      try {
        const social = await fetchJson('https://periandevelopment.github.io/Socials/social.json');
        const colors = social.colors || {};
        const identity = social.identity || {};

        if (colors.primary_hex) document.documentElement.style.setProperty('--brand', colors.primary_hex);
        if (colors.background_hex) document.documentElement.style.setProperty('--bg', colors.background_hex);
        if (colors.text_hex) document.documentElement.style.setProperty('--text', colors.text_hex);

        if (identity.display_name) document.getElementById('site-footer').textContent = `Made with ♥ by ${identity.display_name}`;
      } catch (err) {
        console.warn('Could not load remote social.json — using defaults.', err);
      }
    }

    function renderProjectLinks(projects) {
      const linksContainer = document.getElementById('project-links');
      linksContainer.innerHTML = '';
      projects.forEach(p => {
        const a = document.createElement('a');
        a.className = 'game-link';
        a.href = `?id=${encodeURIComponent(p.id)}`;
        a.textContent = p.title || p.name || p.id || 'Project';
        linksContainer.appendChild(a);
      });
    }

    function getQueryParam(name) {
      const params = new URLSearchParams(window.location.search);
      return params.get(name);
    }

    function renderSelectedProject(projects, id) {
      const container = document.getElementById('game-info');
      container.innerHTML = '';

      const project = projects.find(p => p.id === id) || projects[0];
      if (!project) return;

      const title = document.createElement('h2');
      title.textContent = project.title || project.name || 'Project';
      container.appendChild(title);

      const details = document.createElement('div');
      details.className = 'game-details';

      const cover = document.createElement('div');
      cover.className = 'game-cover';
      const img = document.createElement('img');
      img.src = project.cover || 'banner_2x1.png';
      cover.appendChild(img);
      details.appendChild(cover);

      const meta = document.createElement('div');
      meta.className = 'game-meta';

      const mk = (label, valueHtml) => {
        const wrapper = document.createElement('div');
        wrapper.className = 'meta-item';
        wrapper.innerHTML = `<span class="label">${label}</span><span class="value">${valueHtml}</span>`;
        return wrapper;
      };

      meta.appendChild(mk('Year', project.year || ''));
      meta.appendChild(mk('Studio', project.studio || ''));
      meta.appendChild(mk('Team size', project.teamSize || project.team_size || ''));
      meta.appendChild(mk('My contribution', project.contribution || ''));
      meta.appendChild(mk('Platform', project.platform || ''));
      meta.appendChild(mk('Engine & Tools', project.engineTools || project.engine_tools || ''));
      if (project.link) meta.appendChild(mk('Link', `<a class="reset" href="${project.link}" target="_blank" rel="noopener">${project.linkText || project.link}</a>`));

      details.appendChild(meta);
      container.appendChild(details);
    }

    async function init() {
      await applyBrandingFromRemote();
      try {
        const projects = await fetchJson('https://periandevelopment.github.io/Portfolio1/projects.json');
        renderProjectLinks(projects);
        const paramId = getQueryParam('id');
        renderSelectedProject(projects, paramId);
      } catch (err) {
        console.error('Failed to load projects.json', err);
        const container = document.getElementById('game-info');
        container.innerHTML = '<div style="color:var(--muted)">Failed to load projects. Check projects.json in the repo root.</div>';
      }
    }

    init();
  </script>
</body>
</html>
